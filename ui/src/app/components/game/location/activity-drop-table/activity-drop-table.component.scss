.activity-drop-table {
  margin-top: var(--spacing-l);

  .loading,
  .error,
  .no-drop-tables,
  .empty-state {
    padding: var(--spacing-l);
    text-align: center;
    color: var(--color-text-secondary);
  }

  .error {
    color: var(--color-error);
    background-color: rgba(233, 69, 96, 0.1);
    border: var(--border-width-thin) solid rgba(233, 69, 96, 0.3);
    border-radius: var(--radius-s);
  }

  .drop-table-container {
    background-color: rgba(22, 33, 62, 0.5);
    border: var(--border-width-thin) solid var(--color-surface-border);
    border-radius: var(--radius-s);
    padding: var(--spacing-l);

    .table-switcher {
      display: flex;
      gap: var(--spacing-s);
      margin-bottom: var(--spacing-l);
      flex-wrap: wrap;

      .table-tab {
        padding: var(--spacing-s) var(--spacing-l);
        background-color: rgba(22, 33, 62, 0.3);
        border: var(--border-width-thin) solid var(--color-surface-border);
        border-radius: var(--radius-s);
        color: var(--color-text-secondary);
        cursor: pointer;
        transition: all var(--transition-fast) ease;
        font-size: var(--font-size-s);

        &:hover {
          background-color: rgba(233, 69, 96, 0.2);
          border-color: var(--color-primary);
        }

        &.active {
          background-color: var(--color-primary);
          color: var(--color-text-primary);
          border-color: var(--color-primary);
        }
      }
    }

    .drop-table-header {
      margin-bottom: var(--spacing-l);

      h3 {
        color: var(--color-primary);
        margin: 0 0 var(--spacing-s) 0;
        font-size: var(--font-size-xl);
      }

      .description {
        color: var(--color-text-secondary);
        margin: 0;
        font-size: var(--font-size-s);
        font-style: italic;
      }
    }

    .drop-table-entries {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-m);

      .drop-entry {
        display: grid;
        grid-template-columns: 2fr auto auto;
        grid-template-rows: auto auto;
        gap: var(--spacing-s) var(--spacing-l);
        padding: var(--spacing-m);
        background-color: rgba(26, 26, 46, 0.5);
        border: var(--border-width-thin) solid var(--color-surface-border);
        border-radius: var(--radius-s);
        transition: all var(--transition-fast) ease;

        &:hover {
          background-color: rgba(22, 33, 62, 0.3);
          border-color: var(--color-primary);
        }

        &.drop-nothing {
          opacity: 0.6;
        }

        // Item info spans full width on first row
        .item-info {
          grid-column: 1 / 2;
          grid-row: 1;
          display: flex;
          align-items: center;
          gap: var(--spacing-m);

          .item-icon-wrapper {
            flex-shrink: 0;
          }

          .nothing-icon {
            width: var(--spacing-3xl);
            height: var(--spacing-3xl);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(238, 238, 238, 0.1);
            border-radius: var(--radius-s);

            .material-symbols-outlined {
              font-size: var(--spacing-xl);
              color: var(--color-text-secondary);
            }
          }

          .item-details {
            flex: 1;

            .item-name {
              margin: 0;
              color: var(--color-text-primary);
              font-weight: 500;
              font-size: var(--font-size-m);
            }

            .item-comment {
              margin: var(--spacing-xs) 0 0 0;
              color: var(--color-text-secondary);
              font-size: var(--font-size-s);
              font-style: italic;
            }
          }
        }

        // Drop chance in top-right
        .drop-chance {
          grid-column: 2 / 3;
          grid-row: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xs) var(--spacing-m);
          border-radius: var(--radius-s);
          font-weight: 600;
          min-width: var(--spacing-5xl);

          &.very-common {
            background-color: rgba(76, 175, 80, 0.2);
            color: #76ff7a;
          }

          &.common {
            background-color: rgba(33, 150, 243, 0.2);
            color: #64b5f6;
          }

          &.uncommon {
            background-color: rgba(156, 39, 176, 0.2);
            color: #ba68c8;
          }

          &.rare {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffd54f;
          }

          &.very-rare {
            background-color: rgba(255, 87, 34, 0.2);
            color: #ff8a65;
          }
        }

        // Quantity in top-right after drop chance
        .quantity-range {
          grid-column: 3 / 4;
          grid-row: 1;
          display: flex;
          align-items: center;
          gap: var(--spacing-s);
          padding: var(--spacing-xs) var(--spacing-m);
          background-color: rgba(22, 33, 62, 0.3);
          border-radius: var(--radius-s);
          min-width: var(--spacing-5xl);

          .quantity-label {
            color: var(--color-text-secondary);
            font-size: var(--font-size-s);
          }

          .quantity-value {
            color: var(--color-text-primary);
            font-weight: 500;
          }
        }

        // Modifiers info spans full width on second row
        .modifiers-info {
          grid-column: 1 / 4;
          grid-row: 2;
          padding-top: var(--spacing-s);
          border-top: var(--border-width-thin) solid rgba(74, 74, 106, 0.3);
          display: flex;
          flex-direction: column;
          gap: var(--spacing-xs);

          .qualities,
          .traits,
          .no-modifiers {
            display: flex;
            align-items: baseline;
            gap: var(--spacing-s);
            font-size: var(--font-size-s);

            .modifier-label {
              color: var(--color-text-secondary);
              font-weight: 500;
            }

            .modifier-values {
              color: var(--color-text-primary);

              .quality-bonus {
                color: var(--color-success);
                font-weight: 600;
                margin-left: var(--spacing-xs);
              }
            }
          }

          .no-modifiers {
            .modifier-label {
              font-style: italic;
              font-weight: normal;
            }
          }
        }
      }
    }
  }
}

// Responsive adjustments
@media (max-width: var(--breakpoint-tablet)) {
  .activity-drop-table {
    .drop-table-container {
      .drop-table-entries {
        .drop-entry {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto auto auto;

          .item-info {
            grid-column: 1;
            grid-row: 1;
          }

          .drop-chance {
            grid-column: 1;
            grid-row: 2;
            justify-content: flex-start;
          }

          .quantity-range {
            grid-column: 1;
            grid-row: 3;
            justify-content: flex-start;
          }

          .modifiers-info {
            grid-column: 1;
            grid-row: 4;
          }
        }
      }
    }
  }
}
