@use '../../../../design-tokens.scss';

.quest-tracker {
  padding: var(--spacing-l); // 16px padding
  display: flex;
  flex-direction: column;
  gap: var(--spacing-l);

  .quest-section {
    background: rgba(30, 30, 50, 0.95);
    border: var(--spacing-2xs) solid var(--color-primary);
    border-radius: var(--radius-l);
    overflow: hidden;
    box-shadow: 0 var(--spacing-xs) var(--spacing-s) rgba(0, 0, 0, 0.3);

    .section-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-m);
      padding: var(--spacing-l);
      background: rgba(20, 20, 40, 0.8);
      border-bottom: var(--border-width-medium) solid var(--color-surface-border);
      cursor: pointer;
      transition: background var(--transition-fast);
      user-select: none;

      &:hover {
        background: rgba(30, 30, 50, 0.9);
      }

      .section-icon {
        color: var(--color-secondary);
        font-size: var(--font-size-m);
        width: var(--spacing-l);
        display: inline-block;
        transition: transform var(--transition-fast);
      }

      .section-title {
        color: var(--color-secondary);
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-semibold);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: var(--letter-spacing-wide);
        flex: 1;
      }

      .section-count {
        background: var(--color-primary);
        color: var(--color-text-primary);
        padding: var(--spacing-xs) var(--spacing-m);
        border-radius: var(--radius-full);
        font-size: var(--font-size-s);
        font-weight: var(--font-weight-bold);
        min-width: var(--spacing-3xl);
        text-align: center;
      }
    }

    .section-content {
      max-height: 1000px;
      overflow: hidden;
      transition: max-height var(--transition-normal) ease, opacity var(--transition-normal) ease;
      opacity: 1;

      &.collapsed {
        max-height: 0;
        opacity: 0;
      }

      .quest-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-m);
        padding: var(--spacing-l);

        .quest-item {
          background: rgba(20, 20, 40, 0.8);
          border: var(--border-width-thin) solid rgba(100, 150, 255, 0.3);
          border-radius: var(--radius-card);
          padding: var(--spacing-m);
          transition: all var(--transition-normal);

          &:hover {
            border-color: var(--color-primary);
            box-shadow: 0 var(--spacing-2xs) var(--spacing-s) rgba(100, 150, 255, 0.2);
          }

          &.complete {
            border-color: var(--color-success);
            background: rgba(40, 80, 40, 0.3);
          }

          &.available {
            border-color: rgba(255, 215, 0, 0.4);
          }

          &.completed-quest {
            border-color: rgba(78, 205, 196, 0.4);
            background: rgba(20, 40, 40, 0.3);
          }

          .quest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-m);

            .quest-name {
              color: var(--color-text-primary);
              font-size: var(--font-size-l);
              font-weight: var(--font-weight-semibold);
              margin: 0;
            }

            .quest-progress {
              color: var(--color-accent-blue);
              font-size: var(--font-size-m);
              font-weight: var(--font-weight-bold);
            }

            .completion-badge {
              color: var(--color-success);
              font-size: var(--font-size-m);
              font-weight: var(--font-weight-bold);
              display: flex;
              align-items: center;
              gap: var(--spacing-xs);
            }
          }

          .quest-description {
            margin-bottom: var(--spacing-m);
            color: var(--color-text-tertiary);
            font-size: var(--font-size-m);
            line-height: var(--line-height-normal);

            p {
              margin: 0;
            }
          }

          .quest-objectives {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-s);
            margin-bottom: var(--spacing-m);

            .objective {
              display: flex;
              align-items: center;
              gap: var(--spacing-s);
              color: var(--color-text-secondary);
              font-size: var(--font-size-m);
              padding-left: var(--spacing-s);

              &.completed {
                color: var(--color-success);
                text-decoration: line-through;
              }

              .objective-icon {
                font-size: var(--font-size-l);
                font-weight: var(--font-weight-bold);
                min-width: var(--spacing-xl);
                text-align: center;
              }

              .objective-description {
                flex: 1;
              }
            }
          }

          .turn-in-btn {
            width: 100%;
            padding: var(--spacing-m) var(--spacing-l);
            background: linear-gradient(135deg, var(--color-success) 0%, #3ab395 100%);
            color: var(--color-text-primary);
            border: none;
            border-radius: var(--radius-button);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-m);
            cursor: pointer;
            transition: all var(--transition-fast);
            text-transform: uppercase;
            letter-spacing: var(--letter-spacing-wide);

            &:hover {
              background: linear-gradient(135deg, #5ed9c7 0%, var(--color-success) 100%);
              transform: translateY(calc(-1 * var(--border-width-thin)));
              box-shadow: 0 var(--spacing-xs) var(--spacing-s) rgba(46, 204, 113, 0.3);
            }

            &:active {
              transform: translateY(0);
            }
          }

          .accept-btn {
            width: 100%;
            padding: var(--spacing-m) var(--spacing-l);
            background: var(--gradient-secondary);
            color: var(--color-bg-primary);
            border: none;
            border-radius: var(--radius-button);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-m);
            cursor: pointer;
            transition: all var(--transition-fast);
            text-transform: uppercase;
            letter-spacing: var(--letter-spacing-wide);

            &:hover {
              background: linear-gradient(135deg, var(--color-secondary-light) 0%, var(--color-secondary) 100%);
              transform: translateY(calc(-1 * var(--border-width-thin)));
              box-shadow: 0 var(--spacing-xs) var(--spacing-s) rgba(255, 215, 0, 0.3);
            }

            &:active {
              transform: translateY(0);
            }
          }
        }
      }

      .empty-state {
        padding: var(--spacing-2xl);
        text-align: center;

        .empty-message {
          color: var(--color-text-muted);
          font-size: var(--font-size-m);
          font-style: italic;
          margin: 0;
        }
      }
    }
  }
}
