<div class="game-container">
  <header class="game-header">
    <div class="header-left">
      <h1>ClearSkies</h1>
      @if (currentUser()) {
        <span class="username">{{ currentUser()!.username }}</span>
      }
    </div>
    <div class="header-right">
      @if (currentUser()) {
        <button class="logout-btn" (click)="onLogout()">Logout</button>
      }
    </div>
  </header>

  <main class="game-main">
    @if (currentPlayer()) {
      <div class="game-layout">
        <!-- Left Sidebar: Inventory -->
        <aside class="left-sidebar">
          <div class="panel">
            <h3>Inventory</h3>
            <div class="inventory-grid">
              @for (slot of [1,2,3,4,5,6,7,8,9,10,11,12]; track slot) {
                <div class="inventory-slot empty">
                  <span class="slot-number">{{ slot }}</span>
                </div>
              }
            </div>
            <div class="inventory-footer">
              <div class="gold-display">
                <span class="gold-icon">âšœ</span>
                <span class="gold-amount">{{ currentPlayer()!.gold }}</span>
              </div>
            </div>
          </div>
        </aside>

        <!-- Center: Main Game Area -->
        <section class="center-content">
          <div class="location-header">
            <h2>{{ currentPlayer()!.location.currentZone }}</h2>
            <div class="coordinates">
              X: {{ currentPlayer()!.location.coordinates.x }},
              Y: {{ currentPlayer()!.location.coordinates.y }}
            </div>
          </div>

          <div class="game-area">
            <!-- Skills Component -->
            <app-skills></app-skills>
          </div>
        </section>

        <!-- Right Sidebar: Stats -->
        <aside class="right-sidebar">
          <div class="panel">
            <h3>Character</h3>

            <div class="character-info">
              <div class="level-badge">
                Level {{ currentPlayer()!.level }}
              </div>
              <div class="experience-bar">
                <div class="bar-label">Experience</div>
                <div class="bar-container">
                  <div class="bar exp-bar" [style.width.%]="(currentPlayer()!.experience % 100)">
                  </div>
                  <span class="bar-text">{{ currentPlayer()!.experience }} XP</span>
                </div>
              </div>
            </div>

            <div class="vital-stats">
              <div class="stat-bar">
                <div class="bar-label">Health</div>
                <div class="bar-container">
                  <div class="bar health-bar"
                       [style.width.%]="(currentPlayer()!.stats.health.current / currentPlayer()!.stats.health.max) * 100">
                  </div>
                  <span class="bar-text">
                    {{ currentPlayer()!.stats.health.current }} / {{ currentPlayer()!.stats.health.max }}
                  </span>
                </div>
              </div>

              <div class="stat-bar">
                <div class="bar-label">Mana</div>
                <div class="bar-container">
                  <div class="bar mana-bar"
                       [style.width.%]="(currentPlayer()!.stats.mana.current / currentPlayer()!.stats.mana.max) * 100">
                  </div>
                  <span class="bar-text">
                    {{ currentPlayer()!.stats.mana.current }} / {{ currentPlayer()!.stats.mana.max }}
                  </span>
                </div>
              </div>
            </div>

            <div class="attributes">
              <h4>Attributes</h4>
              <div class="attribute-list">
                <div class="attribute-item">
                  <span class="attribute-label">Strength</span>
                  <span class="attribute-value">{{ currentPlayer()!.stats.strength }}</span>
                </div>
                <div class="attribute-item">
                  <span class="attribute-label">Dexterity</span>
                  <span class="attribute-value">{{ currentPlayer()!.stats.dexterity }}</span>
                </div>
                <div class="attribute-item">
                  <span class="attribute-label">Intelligence</span>
                  <span class="attribute-value">{{ currentPlayer()!.stats.intelligence }}</span>
                </div>
                <div class="attribute-item">
                  <span class="attribute-label">Vitality</span>
                  <span class="attribute-value">{{ currentPlayer()!.stats.vitality }}</span>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    } @else {
      <div class="loading">Loading player data...</div>
    }
  </main>
</div>
