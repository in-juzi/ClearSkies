<div class="attributes-container">
  <h2>Attributes</h2>

  @if (loading()) {
    <div class="loading">Loading attributes...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (attributes() && !loading()) {
    <div class="attributes-grid">
      @for (attributeName of attributeList; track attributeName) {
        <div class="attribute-card">
          <div class="attribute-header">
            <img [src]="getAttributeIcon(attributeName)"
                 [alt]="attributeName"
                 class="attribute-icon"
                 (error)="$event.target.style.display='none'">
            <h3>{{ capitalizeFirst(attributeName) }}</h3>
          </div>

          <div class="attribute-info">
            <div class="level">Level {{ attributes()![attributeName].level }}</div>
            <div class="experience">
              {{ attributes()![attributeName].experience }} XP
            </div>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill"
                   [style.width.%]="attributes()![attributeName].progress">
              </div>
            </div>
            <div class="progress-text">
              {{ attributes()![attributeName].progress.toFixed(1) }}%
            </div>
          </div>

          <div class="xp-to-next">
            {{ attributes()![attributeName].xpToNextLevel }} XP to next level
          </div>

          <!-- Testing button - remove in production -->
          <button class="test-btn" (click)="testAddXP(attributeName)">
            +100 XP (Test)
          </button>
        </div>
      }
    </div>
  }
</div>
