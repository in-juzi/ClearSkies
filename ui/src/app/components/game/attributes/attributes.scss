.attributes-container {
  padding: var(--spacing-l);
  height: 100%;

  h2 {
    color: var(--color-primary);
    margin: 0 0 var(--spacing-l) 0;
    font-size: var(--font-size-2xl);
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .loading,
  .error {
    text-align: center;
    padding: var(--spacing-xl);
    color: var(--color-text-primary);
  }

  .error {
    color: var(--color-error);
  }

  .attributes-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-s);
  }

  .attribute-card {
    background: var(--gradient-card);
    border: var(--border-default);
    border-radius: var(--radius-card);
    padding: var(--spacing-s);
    transition: all var(--transition-normal);
    box-shadow: var(--shadow-m);
    cursor: pointer;
    position: relative;

    &:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-l);
      border-color: var(--color-primary);
      z-index: 100;

      .attribute-hover-card {
        opacity: 1;
        visibility: visible;
      }
    }

    .attribute-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-s);
      margin-bottom: var(--spacing-xs);

      .attribute-icon {
        width: 28px;
        height: 28px;
        object-fit: contain;
        flex-shrink: 0;
      }

      .attribute-title {
        display: flex;
        flex-direction: column;
        gap: 2px;
        flex: 1;
        min-width: 0;
      }

      h3 {
        color: var(--color-primary);
        margin: 0;
        font-size: var(--font-size-s);
        font-weight: var(--font-weight-bold);
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .attribute-level {
        font-size: var(--font-size-xs);
        color: var(--color-accent-blue);
        font-weight: var(--font-weight-semibold);
      }
    }

    .progress-container {
      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--color-bg-overlay-strong);
        border-radius: var(--radius-full);
        overflow: hidden;
        border: var(--border-light);

        .progress-fill {
          height: 100%;
          background: var(--gradient-progress);
          transition: width var(--transition-slow) ease;
          box-shadow: var(--shadow-glow-accent);
        }
      }
    }

    // Hover Detail Card
    .attribute-hover-card {
      position: absolute;
      top: 100%;
      margin-top: var(--spacing-s);
      min-width: 280px;
      background: var(--gradient-card);
      border: 2px solid var(--color-primary);
      border-radius: var(--radius-card);
      padding: var(--spacing-m);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-normal);
      z-index: 1000;
      pointer-events: none;

      // Arrow pointing up to the card
      &::before {
        content: '';
        position: absolute;
        top: -8px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-bottom: 8px solid var(--color-primary);
      }

      .hover-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-m);
        margin-bottom: var(--spacing-m);
        padding-bottom: var(--spacing-s);
        border-bottom: 1px solid var(--color-bg-tertiary);

        .hover-icon {
          width: 40px;
          height: 40px;
          object-fit: contain;
          filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
        }

        .hover-title {
          flex: 1;

          h4 {
            margin: 0;
            font-size: var(--font-size-l);
            color: var(--color-primary);
            text-transform: capitalize;
            font-weight: var(--font-weight-bold);
          }

          .hover-level {
            font-size: var(--font-size-m);
            color: var(--color-accent-blue);
            font-weight: var(--font-weight-semibold);
          }
        }
      }

      .hover-stats {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs);
        margin-bottom: var(--spacing-m);

        .stat-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: var(--spacing-xs) var(--spacing-s);
          background: var(--color-bg-overlay);
          border-radius: var(--radius-card);
          font-size: var(--font-size-s);

          &.highlight {
            background: var(--color-bg-overlay-strong);
            border: 1px solid var(--color-accent-blue);
          }

          .stat-label {
            color: var(--color-text-label);
            font-weight: var(--font-weight-semibold);
          }

          .stat-value {
            color: var(--color-text-primary);
            font-weight: var(--font-weight-bold);
          }
        }
      }

      .hover-footer {
        padding-top: var(--spacing-s);
        border-top: 1px solid var(--color-bg-tertiary);

        .description {
          text-align: center;
          font-size: var(--font-size-s);
          color: var(--color-text-muted);
          font-style: italic;
        }
      }
    }
  }
}

// Adjust hover card position for edge cards
// Use container queries to prevent overflow
.attribute-card {
  .attribute-hover-card {
    // Default: prevent overflow on both sides
    max-width: calc(100vw - 2 * var(--spacing-l));
    max-width: calc(var(--sidebar-width-right) - 2 * var(--spacing-l) - 16px); // Adjust for sidebar width and extra padding
  }
}

.attribute-card:nth-child(3n+1) .attribute-hover-card {
  // Left column - align to left edge
  left: 0;
  transform: translateX(0) translateY(-8px);

  &::before {
    left: var(--spacing-l);
    transform: translateX(0);
  }
}

.attribute-card:nth-child(3n+2) .attribute-hover-card {
  // Middle column - keep centered but prevent overflow
  left: 50%;
  right: auto;
  transform: translateX(-50%) translateY(-8px);

  &::before {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
  }
}

.attribute-card:nth-child(3n) .attribute-hover-card {
  // Right column - align to right edge
  left: auto;
  right: 0;
  transform: translateX(0) translateY(-8px);

  &::before {
    left: auto;
    right: var(--spacing-l);
    transform: translateX(0);
  }
}
