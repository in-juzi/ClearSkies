<div class="chat-container" [class.collapsed]="isCollapsed()">
  <!-- Chat Header (Decomposed Component) -->
  <app-chat-header
    [isCollapsed]="isCollapsed()"
    [connectionStatus]="chatService.connectionStatus()"
    (toggleCollapse)="toggleCollapse()">
  </app-chat-header>

  <!-- Chat Body -->
  @if (!isCollapsed()) {
    <div class="chat-body">
      <!-- Message List (Decomposed Component) -->
      <app-chat-messages
        [messages]="chatService.messages()"
        [shouldScrollToBottom]="shouldScrollToBottom()">
      </app-chat-messages>

      <!-- Chat Input (Decomposed Component) -->
      <app-chat-input
        [connectionStatus]="chatService.connectionStatus()"
        [errorMessage]="errorMessage()"
        [showSuggestions]="showSuggestions()"
        [commandSuggestions]="commandSuggestions()"
        [selectedSuggestionIndex]="selectedSuggestionIndex()"
        [sendingMessage]="sendingMessage()"
        (inputChange)="onInputChange($event)"
        (sendMessage)="sendMessage()"
        (selectSuggestion)="selectSuggestion($event)"
        (keyPress)="onKeyPress($event)"
        (keyDown)="onKeyDown($event)">
      </app-chat-input>
    </div>
  }
</div>
