<!-- Weapon Stats -->
@if (category === 'equipment' && subcategories.includes('weapon')) {
  <div class="detail-section">
    <h4 class="section-title">Weapon Stats</h4>
    <div class="weapon-stats-grid">
      @if (properties['slot']) {
        <div class="detail-row">
          <span class="label">Equipment Slot:</span>
          <span class="text-purple-400">{{ properties['slot'] }}</span>
        </div>
      }
      @if (properties['damageRoll']) {
        <div class="detail-row">
          <span class="label">Damage Roll:</span>
          <span class="text-red-400">{{ properties['damageRoll'] }}</span>
        </div>
      }
      @if (properties['attackSpeed']) {
        <div class="detail-row">
          <span class="label">Attack Speed:</span>
          <span>{{ properties['attackSpeed'].toFixed(1) }}s</span>
        </div>
      }
      @if (properties['critChance'] !== undefined) {
        <div class="detail-row">
          <span class="label">Crit Chance:</span>
          <span class="text-gold-400">{{ (properties['critChance'] * 100).toFixed(1) }}%</span>
        </div>
      }
      @if (properties['skillScalar']) {
        <div class="detail-row">
          <span class="label">Skill:</span>
          <span class="text-purple-400">{{ properties['skillScalar'] }}</span>
        </div>
      }
      @if (properties['requiredLevel'] !== undefined) {
        <div class="detail-row">
          <span class="label">Required Level:</span>
          <span class="text-blue-400">{{ properties['requiredLevel'] }}</span>
        </div>
      }
    </div>
  </div>
}

<!-- Armor Stats -->
@if (category === 'equipment' && subcategories.includes('armor')) {
  <div class="detail-section">
    <h4 class="section-title">Armor Stats</h4>
    <div class="weapon-stats-grid">
      @if (properties['slot']) {
        <div class="detail-row">
          <span class="label">Equipment Slot:</span>
          <span class="text-purple-400">{{ properties['slot'] }}</span>
        </div>
      }
      @if (properties['armor'] !== undefined) {
        <div class="detail-row">
          <span class="label">Armor:</span>
          <span class="text-blue-400">{{ properties['armor'] }}</span>
        </div>
      }
      @if (properties['evasion'] !== undefined) {
        <div class="detail-row">
          <span class="label">Evasion:</span>
          <span class="text-yellow-400">{{ properties['evasion'] }}</span>
        </div>
      }
      @if (properties['blockChance'] !== undefined) {
        <div class="detail-row">
          <span class="label">Block Chance:</span>
          <span class="text-gold-400">{{ (properties['blockChance'] * 100).toFixed(1) }}%</span>
        </div>
      }
      @if (properties['requiredLevel'] !== undefined) {
        <div class="detail-row">
          <span class="label">Required Level:</span>
          <span class="text-blue-400">{{ properties['requiredLevel'] }}</span>
        </div>
      }
    </div>
  </div>
}

<!-- Consumable Effects -->
@if (category === 'consumable') {
  <div class="detail-section">
    <h4 class="section-title">Consumable Effects</h4>
    <div class="consumable-effects">
      @if (properties['healthRestore']) {
        <div class="detail-row">
          <span class="label">Health Restore:</span>
          <span class="text-green-400">+{{ scaledHealthRestore }} HP</span>
        </div>
      }
      @if (properties['manaRestore']) {
        <div class="detail-row">
          <span class="label">Mana Restore:</span>
          <span class="text-blue-400">+{{ scaledManaRestore }} MP</span>
        </div>
      }
      @if (hasPotencyQuality) {
        <p class="consumable-note">
          <span class="text-purple-400">Quality bonus applied</span>
        </p>
      }
    </div>
  </div>
}

<!-- Scaled Weapon Stats (with player skill/attribute levels) -->
@if (combatStats && subcategories.includes('weapon')) {
  <div class="detail-section">
    <h4 class="section-title">Scaled Combat Stats</h4>
    @if (!loadingCombatStats) {
      <div class="weapon-stats-grid">
        <div class="detail-row">
          <span class="label">Scaled Damage:</span>
          <span class="text-red-400">{{ combatStats.scaledDamageRoll }} â†’ {{ combatStats.scaledDamageRange }} (avg {{ combatStats.avgScaledDamage }})</span>
        </div>
        <div class="detail-row">
          <span class="label">Attack Speed:</span>
          <span>{{ combatStats.attackSpeed.toFixed(1) }}s</span>
        </div>
        <div class="detail-row">
          <span class="label">Crit Chance:</span>
          <span class="text-gold-400">{{ (combatStats.critChance * 100).toFixed(1) }}%</span>
        </div>
        <div class="detail-row">
          <span class="label">Level Bonus:</span>
          <span class="text-green-400">+{{ combatStats.totalLevelBonus }} (Skill L{{ combatStats.skillLevel }} + Attr L{{ combatStats.attrLevel }})</span>
        </div>
        @if (combatStats.traitDamageBonus) {
          <div class="detail-row">
            <span class="label">Trait Bonus:</span>
            <span class="text-purple-400">+{{ combatStats.traitDamageBonus }} damage from traits</span>
          </div>
        }
        @if (combatStats.traitCritBonus) {
          <div class="detail-row">
            <span class="label">Trait Crit Bonus:</span>
            <span class="text-purple-400">+{{ (combatStats.traitCritBonus * 100).toFixed(1) }}% from traits</span>
          </div>
        }
        @if (combatStats.traitAttackSpeedBonus) {
          <div class="detail-row">
            <span class="label">Trait Speed Bonus:</span>
            <span class="text-purple-400">{{ combatStats.traitAttackSpeedBonus > 0 ? '+' : '' }}{{ combatStats.traitAttackSpeedBonus.toFixed(1) }}s from traits</span>
          </div>
        }
      </div>
    } @else {
      <div class="text-gray-400 text-center">
        Loading stats...
      </div>
    }
  </div>
}

<!-- Scaled Armor Stats -->
@if (combatStats && subcategories.includes('armor')) {
  <div class="detail-section">
    <h4 class="section-title">Scaled Armor Stats</h4>
    @if (!loadingCombatStats) {
      <div class="weapon-stats-grid">
        @if (combatStats.armor !== undefined) {
          <div class="detail-row">
            <span class="label">Armor:</span>
            <span class="text-blue-400">{{ combatStats.armor }}</span>
          </div>
        }
        @if (combatStats.evasion !== undefined) {
          <div class="detail-row">
            <span class="label">Evasion:</span>
            <span class="text-yellow-400">{{ combatStats.evasion }}</span>
          </div>
        }
        @if (combatStats.blockChance !== undefined) {
          <div class="detail-row">
            <span class="label">Block Chance:</span>
            <span class="text-gold-400">{{ (combatStats.blockChance * 100).toFixed(1) }}%</span>
          </div>
        }
        @if (combatStats.requiredLevel !== undefined) {
          <div class="detail-row">
            <span class="label">Required Level:</span>
            <span class="text-blue-400">{{ combatStats.requiredLevel }}</span>
          </div>
        }
        @if (combatStats.armorTraitBonus) {
          <div class="detail-row">
            <span class="label">Trait Bonus:</span>
            <span class="text-purple-400">+{{ combatStats.armorTraitBonus }} armor from traits</span>
          </div>
        }
        @if (combatStats.evasionTraitBonus) {
          <div class="detail-row">
            <span class="label">Trait Evasion Bonus:</span>
            <span class="text-purple-400">+{{ combatStats.evasionTraitBonus }} from traits</span>
          </div>
        }
      </div>
    } @else {
      <div class="text-gray-400 text-center">
        Loading stats...
      </div>
    }
  </div>
}
